<!-- Cookie Warning -->
<div id="cookie-warning" class="hidden">
    <div id="message-container">
        <p>
            We use cookies for analytics: use of this site indicates approval.
            Click Accept to dismiss this warning, or More Information to find out all about our privacy and cookie policy.
            Thanks.
        </p>
    </div>
    <div id="actions-container">
        <button onclick="didPressAcceptButton()">Accept</button>
        <button onclick="didPresMoreInformation()">More information</button>
    </div>
</div>

<script type="text/javascript">
    const hideCookieInfoKey = 'hideCookieInfo';

    function didPressAcceptButton() {
        shouldHideCookieWarning();
        try {
            window.localStorage.setItem(hideCookieInfoKey, '1');
        } catch (e) {
            console.error('Unable to save state. Error: ', e.message);
        }
    }

    function shouldDisplayCookiesWarnings() {
        document.querySelector('#cookie-warning').classList.remove('hidden');
    }

    function shouldHideCookieWarning() {
        if (!document.querySelector('#cookie-warning').classList.contains('hidden'))
            document.querySelector('#cookie-warning').classList.add('hidden');
    }

    function didPresMoreInformation() {
        window.open(
                `${window.location.origin}/privacy`,
                '_blank'
        )
    }

    // Lets make sure we need to show the alert
    if (window.localStorage) {
        window.localStorage.getItem('hideCookieInfo') === '1' ? shouldHideCookieWarning() : shouldDisplayCookiesWarnings();
    } else {
        console.warn('Unable to use localstorage');
    }

</script>
